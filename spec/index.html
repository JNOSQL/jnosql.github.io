<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Contributors to Jakarta NoSQL Specification (https://github.com/eclipse-ee4j/nosql/graphs/contributors)">
<title>Jakarta NoSQL</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jakarta NoSQL</h1>
<div class="details">
<span id="author" class="author">Contributors to Jakarta NoSQL Specification (https://github.com/eclipse-ee4j/nosql/graphs/contributors)</span><br>
<span id="email" class="email"><a href="mailto:nosql-dev@eclipse.org">nosql-dev@eclipse.org</a></span><br>
<span id="revnumber"> 1.0.0-b5,</span>
<span id="revdate">December 23, 2022</span>
<br><span id="revremark">Draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_one_mapping_api_multiple_databases">1.1. One Mapping API, Multiple Databases</a></li>
<li><a href="#_beyond_jakarta_persistence_jpa">1.2. Beyond Jakarta Persistence (JPA)</a></li>
<li><a href="#_a_fluent_api">1.3. A Fluent API</a></li>
<li><a href="#_lets_not_reinvent_the_wheel_graph_database_type">1.4. Let&#8217;s Not Reinvent the Wheel: Graph Database Type</a></li>
<li><a href="#_particular_behavior_matters_in_nosql_databases">1.5. Particular Behavior Matters in NoSQL Databases</a></li>
<li><a href="#_key_features">1.6. Key Features</a></li>
<li><a href="#_jakarta_nosql_project_team">1.7. Jakarta NoSQL Project Team</a>
<ul class="sectlevel3">
<li><a href="#_project_lead">1.7.1. Project Lead</a></li>
<li><a href="#_committers">1.7.2. Committers</a></li>
<li><a href="#_historical_committer">1.7.3. Historical Committer</a></li>
<li><a href="#_mentor">1.7.4. Mentor</a></li>
<li><a href="#_contributors">1.7.5. Contributors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_introduction_to_the_communication_api">2. Introduction to the Communication API</a>
<ul class="sectlevel2">
<li><a href="#_document_communication_sample">2.1. Document Communication sample</a></li>
<li><a href="#_column_communication_sample">2.2. Column Communication sample</a></li>
<li><a href="#_key_value_communication_sample">2.3. Key-value Communication sample</a></li>
<li><a href="#_the_api_structure">2.4. The API Structure</a></li>
<li><a href="#_value">2.5. Value</a>
<ul class="sectlevel3">
<li><a href="#_create_custom_writer_and_reader">2.5.1. Create Custom Writer and Reader</a></li>
</ul>
</li>
<li><a href="#_element_entity">2.6. Element Entity</a>
<ul class="sectlevel3">
<li><a href="#_document">2.6.1. Document</a></li>
<li><a href="#_column">2.6.2. Column</a></li>
</ul>
</li>
<li><a href="#_entity">2.7. Entity</a>
<ul class="sectlevel3">
<li><a href="#_columnentity">2.7.1. ColumnEntity</a></li>
<li><a href="#_documententity">2.7.2. DocumentEntity</a></li>
<li><a href="#_keyvalueentity">2.7.3. KeyValueEntity</a></li>
</ul>
</li>
<li><a href="#_manager">2.8. Manager</a>
<ul class="sectlevel3">
<li><a href="#_document_manager">2.8.1. Document Manager</a></li>
<li><a href="#_column_manager">2.8.2. Column Manager</a></li>
<li><a href="#_bucketmanager">2.8.3. BucketManager</a></li>
<li><a href="#_querying_by_text_with_the_communication_api">2.8.4. Querying by Text with the Communication API</a></li>
</ul>
</li>
<li><a href="#_factory">2.9. Factory</a></li>
<li><a href="#_configuration">2.10. Configuration</a>
<ul class="sectlevel3">
<li><a href="#_settings">2.10.1. Settings</a></li>
<li><a href="#_document_configuration">2.10.2. Document Configuration</a></li>
<li><a href="#_column_configuration">2.10.3. Column Configuration</a></li>
<li><a href="#_key_value_configuration">2.10.4. Key Value Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_introduction_to_the_mapping_api">3. Introduction to the Mapping API</a>
<ul class="sectlevel2">
<li><a href="#_the_mapping_structure">3.1. The Mapping structure</a></li>
<li><a href="#_models_annotation">3.2. Models Annotation</a>
<ul class="sectlevel3">
<li><a href="#_annotation_models">3.2.1. Annotation Models</a></li>
</ul>
</li>
<li><a href="#_template_classes">3.3. Template classes</a>
<ul class="sectlevel3">
<li><a href="#_key_value_template">3.3.1. Key-Value Template</a></li>
<li><a href="#_columntemplate">3.3.2. ColumnTemplate</a></li>
<li><a href="#_documenttemplate">3.3.3. DocumentTemplate</a></li>
<li><a href="#_graph_template">3.3.4. Graph template</a></li>
<li><a href="#_querying_by_text_with_the_mapping_api">3.3.5. Querying by Text with the Mapping API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_references">4. References</a>
<ul class="sectlevel2">
<li><a href="#_frameworks">4.1. Frameworks</a></li>
<li><a href="#_databases">4.2. Databases</a></li>
<li><a href="#_articles">4.3. Articles</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Specification: Jakarta NoSQL

Version: 1.0.0-b5

Status: Draft

Release: December 23, 2022

Copyright (c) 2020, 2022 Jakarta NoSQL Contributors:
Contributors to Jakarta NoSQL Specification (<a href="https://github.com/eclipse-ee4j/nosql/graphs/contributors" class="bare">https://github.com/eclipse-ee4j/nosql/graphs/contributors</a>)

This program and the accompanying materials are made available under the
terms of the Eclipse Public License v. 2.0 which is available at
<a href="http://www.eclipse.org/legal/epl-2.0" class="bare">http://www.eclipse.org/legal/epl-2.0</a>.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_one_mapping_api_multiple_databases"><a class="anchor" href="#_one_mapping_api_multiple_databases"></a>1.1. One Mapping API, Multiple Databases</h3>
<div class="paragraph">
<p>Jakarta NoSQL is a Java framework that streamlines the integration of Java applications with NoSQL databases.</p>
</div>
<div class="paragraph">
<p>The project has two layers that define communication with NoSQL databases through APIs. These are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Mapping Layer</strong>: This layer is annotation-driven and uses technologies such as Jakarta Contexts and Dependency Injection and Jakarta Bean Validation, making it simple for developers to use.
In the traditional RDBMS world, this layer may be compared to the Java Persistence API or object-relational mapping frameworks such as Hibernate.</p>
</li>
<li>
<p><strong>Communication Layer</strong>: This layer contains four modules, one for each NoSQL database type: Key-Value, Column Family, Document and Graph.
In the traditional the RDBMS world, this layer may be compared to the JDBC API.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This clearly helps to achieve very low application coupling with the underlying NoSQL technologies used in applications.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL defines an API for each NoSQL database type. However, it uses the same annotations to map Java objects.
Therefore, with just these annotations that look like JPA, there is support for more than twenty NoSQL databases.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Deity</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> power;
 <span class="comment">//...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vendor lock-in is one of the things any Java project needs to consider when choosing NoSQL databases. If there is a need to switch out a database, other considerations include: time spent on the change; the learning curve of a new database API; the code that will be lost; the persistence layer that needs to be replaced, etc. Jakarta NoSQL avoids most of these issues through the APIs of <strong>Communication</strong> and <strong>Mapping</strong> Layers.</p>
</div>
<div class="paragraph">
<p>Jakarta NoSQL also has template classes that apply the design pattern 'template method’ to databases operations. And the <code>Repository</code> interface allows Java developers to create and extend interfaces, with implementation automatically provided by a Jakarta NoSQL implementation: support method queries built by developers will automatically be implemented for them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">DeityRepository</span> <span class="directive">extends</span> Repository&lt;Deity, <span class="predefined-type">String</span>&gt; {

    Optional&lt;Deity&gt; findById(<span class="predefined-type">String</span> id);
    Optional&lt;Deity&gt; findByName(<span class="predefined-type">String</span> name);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SeContainer container = SeContainerInitializer.newInstance().initialize()

Service service = container.select(Service.class).get();

DeityRepository repository = service.getDeityRepository();

Deity diana = Deity.builder()
        .withId(<span class="string"><span class="delimiter">&quot;</span><span class="content">diana</span><span class="delimiter">&quot;</span></span>)
        .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>)
        .withPower(<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>)
        .build();

repository.save(diana);

Optional&lt;Deity&gt; idResult = repository.findById(<span class="string"><span class="delimiter">&quot;</span><span class="content">diana</span><span class="delimiter">&quot;</span></span>);
Optional&lt;Deity&gt; nameResult = repository.findByName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_beyond_jakarta_persistence_jpa"><a class="anchor" href="#_beyond_jakarta_persistence_jpa"></a>1.2. Beyond Jakarta Persistence (JPA)</h3>
<div class="paragraph">
<p>The <a href="https://jakarta.ee/specifications/persistence/">Jakarta Persistence</a> specification is a good API for object-relational mapping and has established itself as a Jakarta EE standard. It would be ideal to use the same API for both SQL and NoSQL, but there are behaviors in NoSQL that SQL does not cover, such as time to live and asynchronous operations. Jakarta Persistence was simply not designed to handle those features.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnTemplate template = // instance;
Deity diana = Deity.builder()
        .withId("diana")
        .withName("Diana")
        .withPower("hunt")
        .build();
<strong>Duration ttl = Duration.ofSeconds(1);</strong>
template.insert(diana, <strong>ttl</strong>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_fluent_api"><a class="anchor" href="#_a_fluent_api"></a>1.3. A Fluent API</h3>
<div class="paragraph">
<p>Jakarta NoSQL is a fluent API for Java developers to more easily create queries that either retrieve or delete information in a <code>Document</code> database type, for example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentTemplate template = <span class="comment">// instance; a template to document NoSQL operations</span>
Deity diana = Deity.builder()
        .withId(<span class="string"><span class="delimiter">&quot;</span><span class="content">diana</span><span class="delimiter">&quot;</span></span>)
        .withName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>)
        .withPower(<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>)
        .build();

template.insert(diana);<span class="comment">// insert an entity</span>

DocumentQuery query = select()
        .from(Deity.class)
        .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
        .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>)
        .build(); <span class="comment">// SELECT Deity WHERE name equals “Diana”</span>

<span class="predefined-type">List</span>&lt;Deity&gt; deities = template.select(query); <span class="comment">// execute query</span>

DocumentDeleteQuery delete = delete()
        .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">deity</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
        .eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>)
        .build(); <span class="comment">// delete query</span>

template.delete(delete);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lets_not_reinvent_the_wheel_graph_database_type"><a class="anchor" href="#_lets_not_reinvent_the_wheel_graph_database_type"></a>1.4. Let&#8217;s Not Reinvent the Wheel: Graph Database Type</h3>
<div class="paragraph">
<p>The Communication Layer defines three new APIs: Key-Value, Document and Column Family. It does not have new Graph API, because a very good one already exists. Apache TinkerPop is a graph computing framework for both graph databases (OLTP) and graph analytic systems (OLAP). Using Apache TinkerPop as Communication API for Graph databases, the Mapping API has a tight integration with it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_particular_behavior_matters_in_nosql_databases"><a class="anchor" href="#_particular_behavior_matters_in_nosql_databases"></a>1.5. Particular Behavior Matters in NoSQL Databases</h3>
<div class="paragraph">
<p>Particular behavior matters. Even within the same type, each NoSQL database has a unique feature that may be a considerable factor when choosing one database over another. This ‘’feature’’ might make it easier to develop, make it more scaleable or consistent from a configuration standpoint, have the desired consistency level or search engine, etc. Some examples include: Cassandra and its Cassandra Query Language and consistency level; OrientDB with live queries; ArangoDB and its Arango Query Language; Couchbase with N1QL; etc. Each NoSQL database has a specific behavior and this behavior matters, so Jakarta NoSQL was designed to be extensible enough to capture these substantially different feature elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">PersonRepository</span> <span class="directive">extends</span> CouchbaseRepository {

    <span class="annotation">@N1QL</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">List</span>&lt;Person&gt; findAll();

    <span class="annotation">@N1QL</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where name = $name</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">List</span>&lt;Person&gt; findByName(<span class="annotation">@Param</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> name);
}

Person person = <span class="comment">// instance;</span>
CassandraTemplate template = <span class="comment">//instance;</span>
ConsistencyLevel level = ConsistencyLevel.THREE;
template.save(person, level);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_key_features"><a class="anchor" href="#_key_features"></a>1.6. Key Features</h3>
<div class="ulist">
<ul>
<li>
<p>Simple APIs supporting all well-known NoSQL storage types - Column Family, Key-Value Pair, Graph and Document databases.</p>
</li>
<li>
<p>Use of Convention Over Configuration</p>
</li>
<li>
<p>Easy-to-implement API Specification and Technology Compatibility Kit (TCK) for NoSQL Vendors</p>
</li>
<li>
<p>The APIs focus is on simplicity and ease of use. Developers should only have to know a minimal set of artifacts to work with Jakarta NoSQL. The API is built on Java 8 features like Lambdas and Streams, and therefore fits perfectly with the functional features of Java 8+.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jakarta_nosql_project_team"><a class="anchor" href="#_jakarta_nosql_project_team"></a>1.7. Jakarta NoSQL Project Team</h3>
<div class="paragraph">
<p>This specification is being developed as part of Jakarta NoSQL project under the
Jakarta EE Specification Process. It is the result of the collaborative work
of the project committers and various contributors.</p>
</div>
<div class="sect3">
<h4 id="_project_lead"><a class="anchor" href="#_project_lead"></a>1.7.1. Project Lead</h4>
<div class="ulist">
<ul>
<li>
<p>Otavio Santana</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_committers"><a class="anchor" href="#_committers"></a>1.7.2. Committers</h4>
<div class="ulist">
<ul>
<li>
<p>Andres Galante</p>
</li>
<li>
<p>Fred Rowe</p>
</li>
<li>
<p>Gaurav Gupta</p>
</li>
<li>
<p>Ivan Junckes Filho</p>
</li>
<li>
<p>Jesse Gallagher</p>
</li>
<li>
<p>Nathan Rauh</p>
</li>
<li>
<p>Otavio Santana</p>
</li>
<li>
<p>Werner Keil</p>
</li>
<li>
<p>Michael Redlich</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_historical_committer"><a class="anchor" href="#_historical_committer"></a>1.7.3. Historical Committer</h4>
<div class="ulist">
<ul>
<li>
<p>Leonardo Lima</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mentor"><a class="anchor" href="#_mentor"></a>1.7.4. Mentor</h4>
<div class="ulist">
<ul>
<li>
<p>Wayne Beaton</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contributors"><a class="anchor" href="#_contributors"></a>1.7.5. Contributors</h4>
<div class="paragraph">
<p>The complete list of Jakarta NoSQL contributors may be found <a href="https://github.com/eclipse-ee4j/nosql/graphs/contributors">here</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_the_communication_api"><a class="anchor" href="#_introduction_to_the_communication_api"></a>2. Introduction to the Communication API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the strategy to divide and conquer on Jakarta NoSQL, the communication API was born. It has the goal to make the communication layer easy and extensible. The extensibility is more than important, that is entirely necessary once the API must support specific feature in each database. Nonetheless, the advantage of a common API in a change to another database provider has lesser than using the specific API.</p>
</div>
<div class="paragraph">
<p>To cover the three of the four database types, this API includes three packages, one for each database.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.nosql.column</code></p>
</li>
<li>
<p><code>jakarta.nosql.document</code></p>
</li>
<li>
<p><code>jakarta.nosql.keyvalue</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The package name might change on the Jakarta EE process.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A package for the Graph database type is not included in this API because we leverage the Graph communication API provided by <a href="http://tinkerpop.apache.org/">Apache TinkerPop</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, if a database is multi-model, i.e., has support for more than one database type, it will implement an API for each database it supports. Also, each API has the TCK to prove if the database is compatible with the API. Even from different NoSQL types, it tries to use the same nomenclature:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuration: It is a function that reads from `Settings and then creates a manager factory instance.</p>
</li>
<li>
<p>Manager&#8217;s Factory: The manager factory instance creates a manager instance from the database name.</p>
</li>
<li>
<p>Manager: The manager instance bridges the Jakarta NoSQL and the NoSQL vendor.</p>
</li>
<li>
<p>Entity: The communication entity</p>
</li>
<li>
<p>Value: the information unit</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Structure</th>
<th class="tableblock halign-left valign-top">Key-value</th>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Document</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValueConfiguration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ColumnConfiguration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DocumentConfiguration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Factory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BucketManagerFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ColumnManagerFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DocumentManagerFactory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manager&#8217;s Factory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BucketManager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ColumnManager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DocumentManager</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValueEntity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ColumnEntity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DocumentEntity</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The codes below show several CRUD operations using the communication layer.</p>
</div>
<div class="sect2">
<h3 id="_document_communication_sample"><a class="anchor" href="#_document_communication_sample"></a>2.1. Document Communication sample</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">credential</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).build();
DocumentConfiguration configuration = <span class="keyword">new</span> NoSQLDocumentProvider();
DocumentManagerFactory factory = configuration.apply(settings);
<span class="keyword">try</span> (DocumentManager manager = factory.apply(<span class="string"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>)) {
    DocumentEntity entity = DocumentEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="integer">10L</span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>, <span class="float">0.001</span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);
    manager.insert(entity);
    DocumentQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>).gte(<span class="float">0.001</span>).build();

    Stream&lt;DocumentEntity&gt; entities = manager.select(query);
    DocumentDeleteQuery delete = delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>).eq(<span class="integer">10L</span>).build();

  manager.delete(delete);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_column_communication_sample"><a class="anchor" href="#_column_communication_sample"></a>2.2. Column Communication sample</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">credential</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).build();
ColumnConfiguration configuration = <span class="keyword">new</span> NoSQLColumnProvider();
ColumnManagerFactory factory = configuration.apply(settings);
<span class="keyword">try</span> (ColumnManager manager = factory.apply(<span class="string"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>)) {
    ColumnEntity entity = ColumnEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="integer">10L</span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>, <span class="float">0.001</span>);
    entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);

    manager.insert(entity);
    ColumnQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>).gte(<span class="float">0.001</span>).build();
    Stream&lt;ColumnEntity&gt; entities = manager.select(query);

    ColumnDeleteQuery delete = delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>).eq(<span class="integer">10L</span>).build();

    manager.delete(delete);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_key_value_communication_sample"><a class="anchor" href="#_key_value_communication_sample"></a>2.3. Key-value Communication sample</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">credential</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>).build();
KeyValueConfiguration configuration = <span class="keyword">new</span> NoSQLKeyValueProvider();
BucketManagerFactory factory = configuration.apply(settings);
<span class="keyword">try</span> (BucketManager manager = factory.apply(<span class="string"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>)) {
     KeyValueEntity entity = KeyValueEntity.of(<span class="integer">12</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Poliana</span><span class="delimiter">&quot;</span></span>);

     manager.put(entity);
     manager.delete(<span class="integer">12</span>);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_api_structure"><a class="anchor" href="#_the_api_structure"></a>2.4. The API Structure</h3>
<div class="paragraph">
<p>The communication has four projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>communication-core</strong>: The Jakarta NoSQL API communication common to all database types.</p>
</li>
<li>
<p>The <strong>communication-key-value</strong>: The Jakarta NoSQL communication API layer to a  key-value database.</p>
</li>
<li>
<p>The <strong>communication-column</strong>: The Jakarta NoSQL communication API layer to a  column database.</p>
</li>
<li>
<p>The <strong>communication-document</strong>: The Jakarta NoSQL communication API layer to a document database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each module works separately such that a NoSQL vendor just needs to implement the specific type. For example, a key-value provider will apply a key-value API. If a NoSQL driver already has a driver, this API can work as an adapter with the current one. For a multi-model NoSQL database, providers will implement the APIs they need.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
To the Graph communication API, there is the <a href="http://tinkerpop.apache.org/">Apache TinkerPop</a> that won’t be covered in this documentation.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_value"><a class="anchor" href="#_value"></a>2.5. Value</h3>
<div class="paragraph">
<p>This interface represents the value that will store, that is, a wrapper to serve as a bridge between the database and the application. For example, if a database does not support a Java type, it may do the conversion with ease.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Value value = Value.of(<span class="integer">12</span>);

<span class="predefined-type">String</span> string = value.get(<span class="predefined-type">String</span>.class);

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; list = value.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt;() {});

<span class="predefined-type">Set</span>&lt;<span class="predefined-type">Long</span>&gt; set = value.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">Set</span>&lt;<span class="predefined-type">Long</span>&gt;&gt;() {});

Stream&lt;<span class="predefined-type">Integer</span>&gt; stream = value.get(<span class="keyword">new</span> TypeReference&lt;Stream&lt;<span class="predefined-type">Integer</span>&gt;&gt;() {});

<span class="predefined-type">Object</span> integer = value.get();</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_create_custom_writer_and_reader"><a class="anchor" href="#_create_custom_writer_and_reader"></a>2.5.1. Create Custom Writer and Reader</h4>
<div class="paragraph">
<p>As mentioned before, the <code>Value</code> interface is used to store the cost information into a database. The API already has support to the Java type such as primitive types, wrappers types, new Java 8 date/time. Furthermore, the developer can create a custom converter quickly and easily. It has two interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ValueWriter</code>: This interface represents an instance of <code>Value</code> to write in a database.</p>
</li>
<li>
<p><code>ValueReader</code>: This interface represents how the <code>Value</code> will convert to Java application. This interface will use the <code>&lt;T&gt; T get(Class&lt;T&gt; type)</code> and <code>&lt;T&gt; T get(TypeSupplier&lt;T&gt; typeSupplier)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both class implementations load from the Java SE ServiceLoader resource. So for the Communication API to learn a new type, just register on ServiceLoader. Consider the following <code>Money</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.math.BigDecimal</span>;
<span class="keyword">import</span> <span class="include">java.util.Currency</span>;
<span class="keyword">import</span> <span class="include">java.util.Objects</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Money</span> {

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Currency</span> currency;

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">BigDecimal</span> value;

    <span class="directive">private</span> Money(<span class="predefined-type">Currency</span> currency, <span class="predefined-type">BigDecimal</span> value) {
        <span class="local-variable">this</span>.currency = currency;
        <span class="local-variable">this</span>.value = value;
    }

    <span class="directive">public</span> <span class="predefined-type">Currency</span> getCurrency() {
        <span class="keyword">return</span> currency;
    }

    <span class="directive">public</span> <span class="predefined-type">BigDecimal</span> getValue() {
        <span class="keyword">return</span> value;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> equals(<span class="predefined-type">Object</span> o) {
        <span class="keyword">if</span> (<span class="local-variable">this</span> == o) {
            <span class="keyword">return</span> <span class="predefined-constant">true</span>;
        }
        <span class="keyword">if</span> (o == <span class="predefined-constant">null</span> || getClass() != o.getClass()) {
            <span class="keyword">return</span> <span class="predefined-constant">false</span>;
        }
        Money money = (Money) o;
        <span class="keyword">return</span> Objects.equals(currency, money.currency) &amp;&amp;
                Objects.equals(value, money.value);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">int</span> hashCode() {
        <span class="keyword">return</span> Objects.hash(currency, value);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
        <span class="keyword">return</span> currency.getCurrencyCode() + <span class="string"><span class="delimiter">'</span><span class="content"> </span><span class="delimiter">'</span></span> + value;
    }

    <span class="directive">public</span> <span class="directive">static</span> Money of(<span class="predefined-type">Currency</span> currency, <span class="predefined-type">BigDecimal</span> value) {
        <span class="keyword">return</span> <span class="keyword">new</span> Money(currency, value);
    }

    <span class="directive">public</span> <span class="directive">static</span> Money parse(<span class="predefined-type">String</span> text) {
        <span class="predefined-type">String</span><span class="type">[]</span> texts = text.split(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> <span class="keyword">new</span> Money(<span class="predefined-type">Currency</span>.getInstance(texts[<span class="integer">0</span>]),
                <span class="predefined-type">BigDecimal</span>.valueOf(<span class="predefined-type">Double</span>.valueOf(texts[<span class="integer">1</span>])));
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Just to be more didactic, the book creates a simple money representation. As everyone knows, reinventing the wheel is not a good practice. In a production environment, the Java developer should use mature Money APIs such as <a href="https://github.com/JavaMoney">Moneta</a>, the reference implementation of <a href="https://jcp.org/en/jsr/detail?id=354">JSR 354</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The first step is to create the converter to a custom type database, the <code>ValueWriter</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">jakarta.nosql.ValueWriter</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MoneyValueWriter</span> <span class="directive">implements</span> ValueWriter&lt;Money, <span class="predefined-type">String</span>&gt; {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> isCompatible(<span class="predefined-type">Class</span> type) {
        <span class="keyword">return</span> Money.class.equals(type);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> write(Money money) {
        <span class="keyword">return</span> money.toString();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the <code>MoneyValueWriter</code> created and the <code>Money</code> type will save as String, then the next step is read information to Java application. As can be seen, a <code>ValueReader</code> implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">jakarta.nosql.ValueReader</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">MoneyValueReader</span> <span class="directive">implements</span> ValueReader {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> isCompatible(<span class="predefined-type">Class</span> type) {
        <span class="keyword">return</span> Money.class.equals(type);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> &lt;T&gt; T read(<span class="predefined-type">Class</span>&lt;T&gt; type, <span class="predefined-type">Object</span> value) {
        <span class="keyword">return</span> (T) Money.parse(value.toString());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After both implementations have been completed, the last step is to register them into two files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>META-INF/services/jakarta.nosql.ValueReader</code></p>
</li>
<li>
<p><code>META-INF/services/jakarta.nosql.ValueWriter</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each file will have the qualifier of its respective implementation:</p>
</div>
<div class="paragraph">
<p>The file <code>jakarta.nosql.ValueReader</code> will contain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>my.company.MoneyValueReader</code></pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>jakarta.nosql.ValueWriter</code> will contain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>my.company.MoneyValueWriter</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Value value = Value.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">BRL 10.0</span><span class="delimiter">&quot;</span></span>);

Money money = value.get(Money.class);

<span class="predefined-type">List</span>&lt;Money&gt; moneys = value.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">List</span>&lt;Money&gt;&gt;() {});

<span class="predefined-type">Set</span>&lt;Money&gt; moneys = value.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">Set</span>&lt;Money&gt;&gt;() {});;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_element_entity"><a class="anchor" href="#_element_entity"></a>2.6. Element Entity</h3>
<div class="paragraph">
<p>The <strong>Element Entity</strong> is a small piece of a body, except for the key-value structure type, once this structure is simple. For example, in the column family structure, the entity has columns, the element entity with column has a tuple where the key is the name, and the value is the information as an implementation of <code>Value</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Document</strong></p>
</li>
<li>
<p><strong>Column</strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_document"><a class="anchor" href="#_document"></a>2.6.1. Document</h4>
<div class="paragraph">
<p>The <code>Document</code> is a small piece of a Document entity. Each document has a tuple where the key is the document name, and the value is the information itself as <code>Value</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Document</span> document = <span class="predefined-type">Document</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);

Value value = document.getValue();

<span class="predefined-type">String</span> name = document.getName();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The document might have a nested document, that is, a sub-document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Document</span> subDocument = <span class="predefined-type">Document</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">subDocument</span><span class="delimiter">&quot;</span></span>, document);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The way to store information in sub-documents will also depend on the implementation of each database driver.</p>
</div>
<div class="paragraph">
<p>To access the information from <code>Document</code>, it has an alias method to <code>Value</code>. In other words, it does a conversion directly from <code>Document</code> <em>interface</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Document</span> age = <span class="predefined-type">Document</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">29</span>);

<span class="predefined-type">String</span> ageString = age.get(<span class="predefined-type">String</span>.class);

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; ages = age.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt;() {});

<span class="predefined-type">Object</span> ageObject = age.get();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_column"><a class="anchor" href="#_column"></a>2.6.2. Column</h4>
<div class="paragraph">
<p>The Column is a small piece of the Column Family entity. Each column has a tuple where the name represents a key and the value itself as a <code>Value</code> implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Column document = Column.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);

Value value = document.getValue();

<span class="predefined-type">String</span> name = document.getName();</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this interface, we may have a column inside a column.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Column subColumn = Column.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">subColumn</span><span class="delimiter">&quot;</span></span>, column);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The way to store a sub-column will also depend on each driver&#8217;s implementation as well as the information.</p>
</div>
<div class="paragraph">
<p>To access the information from <code>Column</code>, it has an alias method to <code>Value</code>. Thus, you can convert directly from a <code>Column</code> <em>interface</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Column age = Column.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">29</span>);

<span class="predefined-type">String</span> ageString = age.get(<span class="predefined-type">String</span>.class);

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; ages = age.get(<span class="keyword">new</span> TypeReference&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt;() {});

<span class="predefined-type">Object</span> ageObject = age.get();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_entity"><a class="anchor" href="#_entity"></a>2.7. Entity</h3>
<div class="paragraph">
<p>The Entity is the body of the information that goes to the database. Each database has an Entity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ColumnEntity</p>
</li>
<li>
<p>DocumentEntity</p>
</li>
<li>
<p>KeyValueEntity</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_columnentity"><a class="anchor" href="#_columnentity"></a>2.7.1. ColumnEntity</h4>
<div class="paragraph">
<p>The <code>ColumnEntity</code> is an entity to the Column Family database type. It is composed of one or more columns. As a result, the <code>Column</code> is a tuple of name and value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnEntity entity = ColumnEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="integer">10L</span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>, <span class="float">0.001</span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">options</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>));

<span class="predefined-type">List</span>&lt;Column&gt; columns = entity.getColumns();

Optional&lt;Column&gt; id = entity.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_documententity"><a class="anchor" href="#_documententity"></a>2.7.2. DocumentEntity</h4>
<div class="paragraph">
<p>The <code>DocumentEntity</code> is an entity to Document collection database type. It is composed of one or more documents. As a result, the <code>Document</code> is a tuple of name and value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentEntity entity = DocumentEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">documentFamily</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">String</span> name = entity.getName();

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="integer">10L</span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>, <span class="float">0.001</span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);

entity.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">options</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>));

<span class="predefined-type">List</span>&lt;<span class="predefined-type">Document</span>&gt; documents = entity.getDocuments();
Optional&lt;<span class="predefined-type">Document</span>&gt; id = entity.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>);
entity.remove(<span class="string"><span class="delimiter">&quot;</span><span class="content">options</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_keyvalueentity"><a class="anchor" href="#_keyvalueentity"></a>2.7.3. KeyValueEntity</h4>
<div class="paragraph">
<p>The <code>KeyValueEntity</code> is the simplest structure. It has a tuple and a key-value structure. As the previous entity, it has direct access to information using alias method to <code>Value</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">KeyValueEntity&lt;<span class="predefined-type">String</span>&gt; entity = KeyValueEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, Value.of(<span class="integer">123</span>));

KeyValueEntity&lt;<span class="predefined-type">Integer</span>&gt; entity2 = KeyValueEntity.of(<span class="integer">12</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Text</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">String</span> key = entity.getKey();

Value value = entity.getValue();

<span class="predefined-type">Integer</span> integer = entity.get(<span class="predefined-type">Integer</span>.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manager"><a class="anchor" href="#_manager"></a>2.8. Manager</h3>
<div class="paragraph">
<p>The <code>Manager</code> is the class that pushes information to a database and retrieves it.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>DocumentManager</strong></p>
</li>
<li>
<p><strong>ColumnConfiguration</strong></p>
</li>
<li>
<p><strong>BucketManager</strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_document_manager"><a class="anchor" href="#_document_manager"></a>2.8.1. Document Manager</h4>
<div class="paragraph">
<p>The <code>DocumentManager</code> is the class that manages the persistence on the synchronous way to document collection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentEntity entity = DocumentEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">Document</span> diana = <span class="predefined-type">Document</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);

entity.add(diana);

<span class="predefined-type">List</span>&lt;DocumentEntity&gt; entities = <span class="predefined-type">Collections</span>.singletonList(entity);

DocumentManager manager = <span class="comment">// instance;</span>

<span class="comment">// Insert operations</span>
manager.insert(entity);

manager.insert(entity, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2L</span>)); <span class="comment">// inserts with two hours of TTL</span>

manager.insert(entities, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2L</span>)); <span class="comment">// inserts with two hours of TTL</span>

<span class="comment">// Update operations</span>
manager.update(entity);

manager.update(entities);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_search_information"><a class="anchor" href="#_search_information"></a>2.8.1.1. Search information</h5>
<div class="paragraph">
<p>The Document Communication API supports retrieving information from a <code>DocumentQuery</code> instance.</p>
</div>
<div class="paragraph">
<p>By default, there are two ways to create a <code>DocumentQuery</code> instance that are available as a static method in the same class:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>The select methods</strong> follow the fluent-API principle; thus, it is a safe way to create a query using a DSL code. Therefore, each action will only show the reliability option as a menu.</p>
</li>
<li>
<p><strong>The builder methods</strong> follow the builder pattern; it is not more intelligent and safer than the previous one. However, it allows for running more complex queries and combinations.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both methods should guarantee the validity and consistency`DocumentQuery` instance.</p>
</div>
<div class="paragraph">
<p>In the next step, there are a couple of query creation samples using both select and builder methods.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all fields from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();
<span class="comment">//static imports</span>
DocumentQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();
<span class="comment">//static imports</span>
DocumentQuery query = builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all fields where the "name" equals "Ada Lovelace" from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> DocumentQuery query = DocumentQuery.select()
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
                .build();
<span class="comment">//static imports</span>
 DocumentQuery query = select()
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
                .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder()
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
                .build();
<span class="comment">//static imports</span>
DocumentQuery query = builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
                               .where(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
                               .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the field name where the "name" equals "Ada Lovelace" from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
                .build();
<span class="comment">//static imports</span>
DocumentQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
              .build();
<span class="comment">//static imports</span>

DocumentQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
              .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" and the "age" is greater than twenty from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .build();
<span class="comment">//static imports</span>
DocumentQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
             .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
             .where(DocumentCondition.and(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
             .build();

<span class="comment">//static imports</span>

DocumentQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
             .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
             .where(and(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
             .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .build();
<span class="comment">//static imports</span>
DocumentQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
             .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
             .where(DocumentCondition.or(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
             .build();

<span class="comment">//static imports</span>

DocumentQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
             .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
             .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
             .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty; skip the first element, and the max return is two from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .skip(<span class="integer">1</span>)
              .limit(<span class="integer">2</span>)
              .build();
<span class="comment">//static imports</span>
DocumentQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
              .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
              .skip(<span class="integer">1</span>)
              .limit(<span class="integer">2</span>)
              .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
              .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
              .where(DocumentCondition.or(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                        DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
              .skip(<span class="integer">1</span>).limit(<span class="integer">2</span>)
              .build();

<span class="comment">//static imports</span>

DocumentQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
                .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                        gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
                .skip(<span class="integer">1</span>).limit(<span class="integer">2</span>)
                .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty; skip the first element, and the max return is two sorts ascending by name and descending by age from the document collection Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = DocumentQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).asc()
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>).desc()
            .build();

<span class="comment">//static imports</span>

DocumentQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).asc()
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>).desc()
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> DocumentQuery query = DocumentQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
         .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
         .where(DocumentCondition.or(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
         .sort(Sort.asc(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), Sort.desc(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>))
         .build();

<span class="comment">//static imports</span>

DocumentQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
         .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
         .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
         .sort(asc(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), desc(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>))
         .build();</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_removing_information"><a class="anchor" href="#_removing_information"></a>2.8.1.2. Removing information</h5>
<div class="paragraph">
<p>Similar to <code>DocumentQuery</code>, there is a class to remove information from the document database type: A <code>DocumentDeleteQuery</code> type.</p>
</div>
<div class="paragraph">
<p>It is more efficient than <code>DocumentQuery</code> because there is no pagination and sort feature as this information is unnecessary to remove information from database.</p>
</div>
<div class="paragraph">
<p>It follows the same principle of the query where it has the build and select methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentManager manager = <span class="comment">// instance;</span>
DocumentDeleteQuery query = DocumentQueryBuilder.delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>)
                                                .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">10</span>).build();
manager.delete(query);
<span class="comment">//using builder</span>
DocumentDeleteQuery query = DocumentQueryBuilder.builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>)
                                                .where(DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">10</span>).build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>DocumentCondition</code> has support for both <code>DocumentQuery</code> and <code>DocumentDeleteQuery</code> on fluent and builder patterns.</p>
</div>
<div class="paragraph">
<p>The main difference is that you&#8217;ll combine all the options manually on the builder instead of being transparent as the fluent way does.</p>
</div>
<div class="paragraph">
<p>Thus, it is worth checking the DocumentCondition to see all the filter options.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_column_manager"><a class="anchor" href="#_column_manager"></a>2.8.2. Column Manager</h4>
<div class="paragraph">
<p>The <code>ColumnManager</code> is the class that manages the persistence on the synchronous way to a Column Family database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnEntity entity = ColumnEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">entity</span><span class="delimiter">&quot;</span></span>);

Column diana = Column.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>);

entity.add(diana);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;ColumnEntity&gt; entities = <span class="predefined-type">Collections</span>.singletonList(entity);
ColumnManager manager = <span class="comment">// instance;</span>

<span class="comment">// Insert operations</span>
manager.insert(entity);

manager.insert(entity, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2L</span>)); <span class="comment">// inserts with two hours of TTL</span>

manager.insert(entities, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2L</span>)); <span class="comment">// inserts with two hours of TTL</span>

<span class="comment">// Update operations</span>
manager.update(entity);

manager.update(entities);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Column Communication API supports retrieving information from a <code>ColumnQuery</code> instance.</p>
</div>
<div class="paragraph">
<p>By default, there are two ways to create a <code>ColumnQuery</code> instance that are available as a static method in the same class:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>The select methods</strong> follow the fluent-API principle; thus, it is a safe way to create a query using a DSL code. Therefore, each action will only show the reliability option as a menu.</p>
</li>
<li>
<p><strong>The builder methods</strong> follow the builder pattern; it is not more intelligent and safer than the previous one. However, it allows for running more complex queries and combinations.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both methods should guarantee the validity and consistency`ColumnQuery` instance.</p>
</div>
<div class="paragraph">
<p>In the next step, there are a couple of query creation samples using both select and builder methods.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all fields from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();
<span class="comment">//static imports</span>
ColumnQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();
<span class="comment">//static imports</span>
ColumnQuery query = builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select all fields where the "name" equals "Ada Lovelace" from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select()
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = select()
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder()
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(ColumnCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
            .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the field name where the "name" equals "Ada Lovelace" from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(ColumnCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
            .build();
<span class="comment">//static imports</span>

ColumnQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>))
            .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" and the "age" is greater than twenty from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .and(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(ColumnCondition.and(ColumnCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
             .build();

<span class="comment">//static imports</span>

ColumnQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(and(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
            .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(ColumnCondition.or(ColumnCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             ColumnCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
            .build();

<span class="comment">//static imports</span>

ColumnQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
             gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
            .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty; skip the first element, and the max return is two from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .skip(<span class="integer">1</span>)
            .limit(<span class="integer">2</span>)
            .build();
<span class="comment">//static imports</span>
ColumnQuery query = select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .skip(<span class="integer">1</span>)
            .limit(<span class="integer">2</span>)
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(ColumnCondition.or(ColumnCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                        ColumnCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
            .skip(<span class="integer">1</span>).limit(<span class="integer">2</span>)
            .build();

<span class="comment">//static imports</span>

ColumnQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
                .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
                .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                        gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
                .skip(<span class="integer">1</span>).limit(<span class="integer">2</span>)
                .build();</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the fields name and age where the "name" is "Ada Lovelace" or the "age" is greater than twenty; skip the first element, and the max return is two sorts ascending by name and descending by age from the column family Person.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the select method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = ColumnQuery.select(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
            .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>)
            .or(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">20</span>)
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>).asc()
            .orderBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>).desc()
            .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the builder method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> ColumnQuery query = ColumnQuery.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
         .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
         .where(DocumentCondition.or(DocumentCondition.eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
         .sort(Sort.asc(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), Sort.desc(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>))
         .build();

<span class="comment">//static imports</span>

ColumnQuery query = builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>)
         .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>)
         .where(or(eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>),
                gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">20</span>)))
         .sort(asc(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), desc(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>))
         .build();</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_removing_information_2"><a class="anchor" href="#_removing_information_2"></a>2.8.2.1. Removing information</h5>
<div class="paragraph">
<p>Similar to <code>ColumnQuery</code>, there is a class to remove information from the document database type: A <code>ColumnDeleteQuery</code> type.</p>
</div>
<div class="paragraph">
<p>It is more efficient than <code>ColumnQuery</code> because there is no pagination and sort feature as this information is unnecessary to remove information from database.</p>
</div>
<div class="paragraph">
<p>It follows the same principle of the query where it has the build and select methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnManager manager = <span class="comment">// instance;</span>
ColumnDeleteQuery query = ColumnDeleteQuery.delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>)
                                                .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>).gt(<span class="integer">10</span>).build();
manager.delete(query);
<span class="comment">//using builder</span>
ColumnDeleteQuery query = ColumnDeleteQuery.builder().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>)
                                                .where(DocumentCondition.gt(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, <span class="integer">10</span>).build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ColumnCondition</code> has support for both <code>ColumnQuery</code> and <code>ColumnDeleteQuery</code> on fluent and builder patterns.</p>
</div>
<div class="paragraph">
<p>The main difference is that you&#8217;ll combine all the options manually on the builder instead of being transparent as the fluent way does.</p>
</div>
<div class="paragraph">
<p>Thus, it is worth checking the ColumnCondition to see all the filter options.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bucketmanager"><a class="anchor" href="#_bucketmanager"></a>2.8.3. BucketManager</h4>
<div class="paragraph">
<p>The <code>BucketManager</code> is the class which saves the <code>KeyValueEntity</code> in a synchronous way in Key-Value database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">BucketManager bucketManager = <span class="comment">//instance;</span>
KeyValueEntity&lt;<span class="predefined-type">String</span>&gt; entity = KeyValueEntity.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="integer">1201</span>);

<span class="predefined-type">Set</span>&lt;KeyValueEntity&lt;<span class="predefined-type">String</span>&gt;&gt; entities = <span class="predefined-type">Collections</span>.singleton(entity);

bucketManager.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>);

bucketManager.put(entity);

bucketManager.put(entities);

bucketManager.put(entities, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2</span>)); <span class="comment">// inserts with two hours TTL</span>

bucketManager.put(entity, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">2</span>)); <span class="comment">// inserts with two hours TTL</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_remove_and_retrieve_information"><a class="anchor" href="#_remove_and_retrieve_information"></a>2.8.3.1. Remove and Retrieve information</h5>
<div class="paragraph">
<p>With a simple structure, the bucket needs a key to both retrieve and delete information from the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Optional&lt;Value&gt; value = bucketManager.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">Iterable</span>&lt;Value&gt; values = bucketManager.get(<span class="predefined-type">Collections</span>.singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>));

bucketManager.remove(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>);

bucketManager.remove(<span class="predefined-type">Collections</span>.singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_querying_by_text_with_the_communication_api"><a class="anchor" href="#_querying_by_text_with_the_communication_api"></a>2.8.4. Querying by Text with the Communication API</h4>
<div class="paragraph">
<p>The Communication API allows queries to be text. These queries are converted to an operation that already exists in the Manager interface from the <code>query</code> method. An <code>UnsupportedOperationException</code> is thrown if a NoSQL database doesn&#8217;t have support for that procedure.</p>
</div>
<div class="paragraph">
<p>Queries follow these rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All instructions end with a like break <code>\n</code></p>
</li>
<li>
<p>It is case-sensitive</p>
</li>
<li>
<p>All keywords must be in lowercase</p>
</li>
<li>
<p>The goal is to look like SQL, however simpler</p>
</li>
<li>
<p>Even if a query has valid sintax a specific implementation may not support an operation. For example, a Column family database may not support queries in a different field that is not the ID field.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_key_value_database_types"><a class="anchor" href="#_key_value_database_types"></a>2.8.4.1. Key-Value Database Types</h5>
<div class="paragraph">
<p>Key-Value databases support three operations: <code>get</code>, <code>del</code> and <code>put</code>.</p>
</div>
<div class="sect5">
<h6 id="_get"><a class="anchor" href="#_get"></a><code>get</code></h6>
<div class="paragraph">
<p>Use the <code>get</code> statement to retrie data related to a key</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">get_statement ::=  get ID (<span class="string"><span class="delimiter">'</span><span class="content">,</span><span class="delimiter">'</span></span> ID)*

//examples
get <span class="string"><span class="delimiter">&quot;</span><span class="content">Apollo</span><span class="delimiter">&quot;</span></span> //<span class="keyword">to</span> <span class="directive">return</span> an element <span class="keyword">where</span> the id <span class="keyword">is</span> <span class="string"><span class="delimiter">'</span><span class="content">Apollo</span><span class="delimiter">'</span></span>
get <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Artemis</span><span class="delimiter">&quot;</span></span> //<span class="keyword">to</span> <span class="directive">return</span> a list <span class="keyword">of</span> <span class="keyword">values</span> <span class="keyword">from</span> the keys</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_del"><a class="anchor" href="#_del"></a><code>del</code></h6>
<div class="paragraph">
<p>Use the <code>del</code> statement to delete one or more entities</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">del_statement ::=  del ID (<span class="string"><span class="delimiter">'</span><span class="content">,</span><span class="delimiter">'</span></span> ID)*

//examples
del <span class="string"><span class="delimiter">&quot;</span><span class="content">Apollo</span><span class="delimiter">&quot;</span></span>
del <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Artemis</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_put"><a class="anchor" href="#_put"></a><code>put</code></h6>
<div class="paragraph">
<p>Use the <code>put</code> statement to either insert or override values</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">put_statement ::=  put {<span class="type">KEY</span>, VALUE [, TTL]}

//examples
put {<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span> , <span class="string"><span class="delimiter">&quot;</span><span class="content">The goddess of hunt</span><span class="delimiter">&quot;</span></span>} //adds <span class="type">key</span> <span class="string"><span class="delimiter">'</span><span class="content">diana</span><span class="delimiter">'</span></span> <span class="keyword">and</span> value <span class="string"><span class="delimiter">'</span><span class="content">The goddess of hunt</span><span class="delimiter">'</span></span>
put {<span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span> , <span class="string"><span class="delimiter">&quot;</span><span class="content">The goddess of hunt</span><span class="delimiter">&quot;</span></span>, <span class="integer">10</span> second} //also defines a TTL <span class="keyword">of</span> <span class="integer">10</span> seconds</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_column_family_and_document_database_types"><a class="anchor" href="#_column_family_and_document_database_types"></a>2.8.4.2. Column-Family and Document Database Types</h5>
<div class="paragraph">
<p>The queries have syntax similar to SQL queries. But keep in mind that it has a limitation: joins are not supported.</p>
</div>
<div class="paragraph">
<p>They have four operations: <code>insert</code>, <code>update</code>, <code>delete</code>, and <code>select</code>.</p>
</div>
<div class="sect5">
<h6 id="_insert"><a class="anchor" href="#_insert"></a><code>insert</code></h6>
<div class="paragraph">
<p>Use the <code>insert</code> statement to store data for an entity</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">insert_statement ::=  <span class="class">insert</span> ENTITY_NAME (NAME = VALUE, (<span class="string"><span class="delimiter">`</span><span class="content">,</span><span class="delimiter">`</span></span> NAME = VALUE) *) || JSON [ TTL ]

//examples
<span class="class">insert</span> Deity (name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, age = <span class="integer">10</span>)
<span class="class">insert</span> Deity (name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, age = <span class="integer">10</span>, powers = {<span class="string"><span class="delimiter">&quot;</span><span class="content">sun</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>})
<span class="class">insert</span> Deity (name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, age = <span class="integer">10</span>, powers = {<span class="string"><span class="delimiter">&quot;</span><span class="content">sun</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>}) <span class="integer">1</span> day
<span class="class">insert</span> Deity {<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>: <span class="integer">10</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">powers</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>]}
<span class="class">insert</span> Deity {<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>: <span class="integer">10</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">powers</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>]} <span class="integer">1</span> day</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_update"><a class="anchor" href="#_update"></a><code>update</code></h6>
<div class="paragraph">
<p>Use the <code>update</code> statement to update the values of an entity</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">update_statement ::= <span class="class">update</span> ENTITY_NAME (NAME = VALUE, (<span class="string"><span class="delimiter">`</span><span class="content">,</span><span class="delimiter">`</span></span> NAME = VALUE) *) || JSON

 //examples
<span class="class">update</span> Deity (name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, age = <span class="integer">10</span>)
<span class="class">update</span> Deity (name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, age = <span class="integer">10</span>, power = {<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>})
<span class="class">update</span> Deity {<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>: <span class="integer">10</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">power</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">hunt</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">moon</span><span class="delimiter">&quot;</span></span>]}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_delete"><a class="anchor" href="#_delete"></a><code>delete</code></h6>
<div class="paragraph">
<p>Use the <code>delete</code> statement to remove fields or entities</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">delete_statement ::=  <span class="class">delete</span> [ simple_selection ( <span class="string"><span class="delimiter">'</span><span class="content">,</span><span class="delimiter">'</span></span> simple_selection ) ]
                      <span class="keyword">from</span> ENTITY_NAME
                      [ <span class="keyword">where</span> WHERE_CLAUSE ]
//examples
<span class="class">delete</span> <span class="keyword">from</span> Deity
<span class="class">delete</span> power, age <span class="keyword">from</span> Deity <span class="keyword">where</span> name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Diana</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_select"><a class="anchor" href="#_select"></a><code>select</code></h6>
<div class="paragraph">
<p>The <code>select</code> statement reads one or more fields for one or more entities. It returns a result-set of the entities matching the request, where each entity contains the fields corresponding to the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">select_statement ::=  <span class="class">select</span> ( SELECT_CLAUSE | <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> )
                      <span class="keyword">from</span> ENTITY_NAME
                      [ <span class="keyword">where</span> WHERE_CLAUSE ]
                      [ skip (<span class="predefined-type">INTEGER</span>) ]
                      [ limit (<span class="predefined-type">INTEGER</span>) ]
                      [ <span class="keyword">order</span> <span class="keyword">by</span> ORDERING_CLAUSE ]
//examples
<span class="class">select</span> * <span class="keyword">from</span> Deity
<span class="class">select</span> name, age, adress.age <span class="keyword">from</span> Deity <span class="keyword">order</span> <span class="keyword">by</span> name <span class="directive">desc</span> age <span class="directive">desc</span>
<span class="class">select</span> * <span class="keyword">from</span> Deity <span class="keyword">where</span> birthday <span class="keyword">between</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">01-09-1988</span><span class="delimiter">&quot;</span></span> <span class="keyword">and</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">01-09-1988</span><span class="delimiter">&quot;</span></span> <span class="keyword">and</span> salary = <span class="integer">12</span>
<span class="class">select</span> name, age, adress.age <span class="keyword">from</span> Deity skip <span class="integer">20</span> limit <span class="integer">10</span> <span class="keyword">order</span> <span class="keyword">by</span> name <span class="directive">desc</span> age <span class="directive">desc</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_where"><a class="anchor" href="#_where"></a>2.8.4.3. <code>where</code></h5>
<div class="paragraph">
<p>The <code>where</code> keyword specifies a filter (<code>WHERE_CLAUSE</code>) to the query. A filter is composed of boolean statements called <code>conditions</code> that are combined using <code>and</code> or <code>or</code> operators.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">WHERE_CLAUSE ::= CONDITION ([<span class="keyword">and</span> | <span class="keyword">or</span>] CONDITION)*</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_conditions"><a class="anchor" href="#_conditions"></a>2.8.4.4. Conditions</h5>
<div class="paragraph">
<p>Conditions are boolean statements that operate on data being queried. They are composed of three elements:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Name</strong>: the data source, or target, to apply the operator</p>
</li>
<li>
<p><strong>Operator</strong>, defines comparing process between the name and the value.</p>
</li>
<li>
<p><strong>Value</strong>, that data that receives the operation.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_operators"><a class="anchor" href="#_operators"></a>2.8.4.5. Operators</h5>
<div class="paragraph">
<p>The Operators are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Operators in a query</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Operator</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>=</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equal to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&gt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&gt;=</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Greater than or equal to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&#8656;</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Less than or equal to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BETWEEN</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE if the operand is within the range of comparisons</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NOT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays a record if the condition(s) is NOT TRUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>AND</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE if all the conditions separated by AND is TRUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>OR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE if any of the conditions separated by OR is TRUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LIKE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE if the operand matches a pattern</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>IN</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TRUE if the operand is equal to one of a list of expressions</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_the_value"><a class="anchor" href="#_the_value"></a>2.8.4.6. The Value</h5>
<div class="paragraph">
<p>The value is the last element in a condition, and it defines what&#8217;ll go to be used, with an operator, in a field target.</p>
</div>
<div class="paragraph">
<p>There are six types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Number is a mathematical object used to count, measure and also label, where if it is a decimal, will become <strong>double</strong>, otherwise, <strong>long</strong>. E.g.: <code>age = 20</code>, <code>salary = 12.12</code></p>
</li>
<li>
<p>String: one or more characters among either two double quotes, <code>"</code>,  or single quotes, <code>'</code>. E.g.: <code>name = "Ada Lovelace"</code>, <code>name = 'Ada Lovelace'</code></p>
</li>
<li>
<p>Convert: convert is a function where given the first value parameter as number or string, it will convert to the class type of the second one. E.g.: <code>birthday = convert("03-01-1988", java.time.LocalDate)</code></p>
</li>
<li>
<p>Parameter: the parameter is a dynamic value, which means it does not define the query; it&#8217;ll replace in the execution time. The parameter is at <code>@</code> followed by a name. E.g.: <code>age = @age</code></p>
</li>
<li>
<p>Array: A sequence of elements that can be either number or string that is between braces <code>{  }</code>. E.g.: <code>power = {"Sun", "hunt"}</code></p>
</li>
<li>
<p>JSON: JavaScript Object Notation is a lightweight data-interchange format. E.g.: <code>siblings = {"apollo": "brother", "zeus": "father"}</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_skip"><a class="anchor" href="#_skip"></a>2.8.4.7. <code>skip</code></h5>
<div class="paragraph">
<p>The <code>skip</code> option in a <code>select</code> statement defines where the query results should start.</p>
</div>
</div>
<div class="sect4">
<h5 id="_limit"><a class="anchor" href="#_limit"></a>2.8.4.8. <code>limit</code></h5>
<div class="paragraph">
<p>The <code>limit</code> option in a <code>select</code> statement limits the number of rows returned by a query.</p>
</div>
</div>
<div class="sect4">
<h5 id="_order_by"><a class="anchor" href="#_order_by"></a>2.8.4.9. <code>order by</code></h5>
<div class="paragraph">
<p>The <code>order by</code> option allows defining the order of the returned results. It takes as argument (ORDERING_CLAUSE) a list of column names along with the ordering for the column (<code>asc</code> for ascendant, which is the default, and <code>desc</code> for the descendant).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">ORDERING_CLAUSE ::= NAME [<span class="directive">asc</span> | <span class="directive">desc</span>] ( NAME [<span class="directive">asc</span> | <span class="directive">desc</span>])*</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ttl"><a class="anchor" href="#_ttl"></a>2.8.4.10. TTL</h5>
<div class="paragraph">
<p>Both the <strong>INSERT</strong> and <strong>PUT</strong> commands support setting a time for data in an entity to expire. It defines the time to live of an object that is composed of the integer value and then the unit that might be <code>day</code>, <code>hour</code>, <code>minute</code>, <code>second</code>, <code>millisecond</code>, <code>nanosecond</code>. E.g.: <code>ttl 10 second</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_preparedstatement_and_preparedstatementasync"><a class="anchor" href="#_preparedstatement_and_preparedstatementasync"></a>2.8.4.11. <code>PreparedStatement</code> and <code>PreparedStatementAsync</code></h5>
<div class="paragraph">
<p>To dynamically run a query, use the <code>prepare</code> method in the manager for instance. It will return a <code>PreparedStatement</code> interface. To define a parameter to key-value, document, and column query, use the "@" in front of the name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">PreparedStatement</span> preparedStatement = documentManager
        .prepare(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where name = @name</span><span class="delimiter">&quot;</span></span>);

preparedStatement.bind(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada</span><span class="delimiter">&quot;</span></span>);

Stream&lt;DocumentEntity&gt; adas = preparedStatement.getResult();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">PreparedStatementAsync preparedStatement = documentManagerAsync
        .prepare(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where name = @name</span><span class="delimiter">&quot;</span></span>);

preparedStatement.bind(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada</span><span class="delimiter">&quot;</span></span>);

Consumer&lt;Stream&lt;DocumentEntity&gt;&gt; callback = <span class="comment">//instance;</span>

preparedStatement.getResult(callback);</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
For more information on Apache TinkerPop and the Gremlin API, please visit this <a href="https://tinkerpop.apache.org/gremlin.html">website</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_factory"><a class="anchor" href="#_factory"></a>2.9. Factory</h3>
<div class="paragraph">
<p>The factory class creates the <strong>Managers</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>BucketManagerFactory</strong>: The factory classes have the responsibility to create the <code>BucketManager</code>.</p>
</li>
<li>
<p><strong>ColumnManagerFactory</strong>: The factory classes have the duty to create the Column manager.</p>
</li>
<li>
<p><strong>DocumentManagerFactory</strong>: The factory classes have the duty to create the document collection manager.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>2.10. Configuration</h3>
<div class="paragraph">
<p>The configuration classes create a Manager Factory. This class has all the configuration to build the database connection.</p>
</div>
<div class="paragraph">
<p>There are a large number of diversity configuration flavors such as P2P, master/slave, thrift communication, HTTP, etc. The implementation may be different, however, but they have a method to return a Manager Factory. It is recommended that all database driver providers have a properties file to read this startup information.</p>
</div>
<div class="sect3">
<h4 id="_settings"><a class="anchor" href="#_settings"></a>2.10.1. Settings</h4>
<div class="paragraph">
<p>The <code>Settings</code> interface represents the settings used in a configuration. It extends looks like a <code>Map&lt;String, Object&gt;</code>; for this reason, gives a key that can set any value as configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder()
    .put(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)
    .build();
<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; map = <span class="comment">//instance;</span>

Settings settings = Settings.of(map);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_document_configuration"><a class="anchor" href="#_document_configuration"></a>2.10.2. Document Configuration</h4>
<div class="paragraph">
<p>For the Document collection configuration, <code>DocumentConfiguration</code> configures and creates <code>DocumentManagerFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder()
    .put(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)
    .build();
DocumentConfiguration configuration = <span class="comment">//instance;</span>
DocumentManagerFactory managerFactory = configuration.get(settings);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_column_configuration"><a class="anchor" href="#_column_configuration"></a>2.10.3. Column Configuration</h4>
<div class="paragraph">
<p>For the Column Family configuration, <code>ColumnConfiguration</code> creates and configures <code>ColumnManagerFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder()
    .put(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)
    .build();
ColumnConfiguration configuration = <span class="comment">//instance;</span>
ColumnManagerFactory managerFactory = configuration.get(settings);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_key_value_configuration"><a class="anchor" href="#_key_value_configuration"></a>2.10.4. Key Value Configuration</h4>
<div class="paragraph">
<p>For the key-value configuration, there is <code>KeyValueConfiguration</code> to <code>BucketManagerFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Settings settings = Settings.builder()
    .put(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>)
    .build();
KeyValueConfiguration configuration = <span class="comment">//instance;</span>
BucketManagerFactory managerFactory = configuration.get();</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_the_mapping_api"><a class="anchor" href="#_introduction_to_the_mapping_api"></a>3. Introduction to the Mapping API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The mapping level, to put it differently, has the same goals as either the JPA or ORM. In the NoSQL world, the <strong>OxM</strong> then converts the entity object to a communication model.</p>
</div>
<div class="paragraph">
<p>This level is in charge to perform integration among technologies such as Bean Validation. The Mapping API has annotations that make the Java developer’s life easier. As a communication project, it must be extensible and configurable to keep the diversity of NoSQL database.</p>
</div>
<div class="paragraph">
<p>To go straight and cover the four NoSQL types, this API has four domains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.nosql.mapping.column</code></p>
</li>
<li>
<p><code>jakarta.nosql.mapping.document</code></p>
</li>
<li>
<p><code>jakarta.nosql.mapping.graph</code></p>
</li>
<li>
<p><code>jakarta.nosql.mapping.keyvalue</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The package name might change on the Jakarta EE process.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_the_mapping_structure"><a class="anchor" href="#_the_mapping_structure"></a>3.1. The Mapping structure</h3>
<div class="paragraph">
<p>The mapping API has five parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>persistence-core</strong>: The mapping common project where there are annotations commons among the NoSQL types APIs.</p>
</li>
<li>
<p>The <strong>persistence-key-value</strong>: The mapping to key-value NoSQL database.</p>
</li>
<li>
<p>The <strong>persistence-column</strong>: The mapping to column NoSQL database.</p>
</li>
<li>
<p>The <strong>persistence-document</strong>: The mapping to document NoSQL database.</p>
</li>
<li>
<p>The <strong>persistence-graph</strong>: The mapping to Graph NoSQL database.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Each module works separately as a Communication API.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Similar to the communication API, there is a support for database diversity. This project has extensions for each database types on the database mapping level.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_models_annotation"><a class="anchor" href="#_models_annotation"></a>3.2. Models Annotation</h3>
<div class="paragraph">
<p>As previously mentioned, the Mapping API provides annotations that make the Java developer&#8217;s life easier. These annotations can be categorized in two categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Annotation Models</p>
</li>
<li>
<p>Qualifier Annotation</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_annotation_models"><a class="anchor" href="#_annotation_models"></a>3.2.1. Annotation Models</h4>
<div class="paragraph">
<p>The annotation model converts the entity model into the entity on communication, the communication entity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entity</p>
</li>
<li>
<p>Column</p>
</li>
<li>
<p>Id</p>
</li>
<li>
<p>Embeddable</p>
</li>
<li>
<p>Convert</p>
</li>
<li>
<p>MappedSuperclass</p>
</li>
<li>
<p>Inheritance</p>
</li>
<li>
<p>DiscriminatorColumn</p>
</li>
<li>
<p>DiscriminatorValue</p>
</li>
<li>
<p>Database</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Jakarta NoSQL Mapping does not require getter and setter methods to fields. However, the Entity class must have a non-private constructor with no parameters.</p>
</div>
<div class="sect4">
<h5 id="_entity_2"><a class="anchor" href="#_entity_2"></a>3.2.1.1. @Entity</h5>
<div class="paragraph">
<p>This annotation maps the class to Jakarta NoSQL. There is a single value attribute. This attribute specifies the column family name, or the document collection name, etc. The default value is the simple name of the class. For example, given the <code>org.jakarta.nosql.demo.Person</code> class, the default name will be <code>Person</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">ThePerson</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An entity that is a field will be incorporated as a sub-entity. For example, in a Document, the entity field will be converted to a sub-document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> Address address;
}

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">_id</span><span class="delimiter">&quot;</span></span>:<span class="integer">10</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelave</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>:{
      <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">São Paulo</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Av Nove de Julho</span><span class="delimiter">&quot;</span></span>
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_column_2"><a class="anchor" href="#_column_2"></a>3.2.1.2. @Column</h5>
<div class="paragraph">
<p>This annotation defines which fields that belong to an Entity will be persisted. There is a single attribute that specifies that name in Database. It is default value that is the field name as declared in the class. This annotation is mandatory for non-Key-Value database types. In Key-Value types, only the Key needs to be identified with <code>@Key</code> - all other fields are stored as a single blob.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> nickname;

    <span class="annotation">@Column</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">personName</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; phones;

    <span class="comment">// ignored</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> address;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_id"><a class="anchor" href="#_id"></a>3.2.1.3. @Id</h5>
<div class="paragraph">
<p>This annotation defines which attribute is the entity&#8217;s ID, or the Key in Key-Value databases. In such a case, the Value is the remaining information. It has a single attribute (like <code>@Column</code>) to define the native name. Unlike <code>@Column</code>, the default value is <code>_id</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">User</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> userName;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; phones;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_embeddable"><a class="anchor" href="#_embeddable"></a>3.2.1.4. @Embeddable</h5>
<div class="paragraph">
<p>This annotation defines a class whose instances are stored as an intrinsic part of an owning entity and share the identity of that object. The behaviour is similar to <code>@MappedSuperclass</code>, but this is used on composition instead of inheritance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> title;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> Author author;
}

<span class="annotation">@Embeddable</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Author</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> author;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Integer</span> age;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, there is a single instance in the database with columns <code>title</code>, <code>author</code> and <code>age</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Effective Java</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Joshua Bloch</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>: <span class="integer">2019</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_convert"><a class="anchor" href="#_convert"></a>3.2.1.5. @Convert</h5>
<div class="paragraph">
<p>This annotation allows value conversions when mapping the value that came from the Communication API. This is useful for cases such as to cipher a field (String to String conversion), or to convert to a custom type. The Converter annotation has a single, mandatory parameter: a class that inherits from <code>AttributeConverter</code> that will be used to perform the conversion. The example below shows how to create a converter to a custom <code>Money</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Employee</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> Job job;

    <span class="annotation">@Column</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">money</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Convert</span>(MoneyConverter.class)
    <span class="directive">private</span> MonetaryAmount salary;
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">MoneyConverter</span> <span class="directive">implements</span> AttributeConverter&lt;MonetaryAmount, <span class="predefined-type">String</span>&gt; {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> convertToDatabaseColumn(MonetaryAmount appValue) {
        <span class="keyword">return</span> appValue.toString();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> MonetaryAmount convertToEntityAttribute(<span class="predefined-type">String</span> dbValue) {
        <span class="keyword">return</span> MonetaryAmount.parse(dbValue);
    }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">MonetaryAmount</span> {
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> currency;

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">BigDecimal</span> value;

    <span class="directive">public</span> <span class="predefined-type">String</span> toString() {
        <span class="comment">// specific implementation</span>
    }

    <span class="directive">public</span> <span class="directive">static</span> MonetaryAmount parse(<span class="predefined-type">String</span> string) {
        <span class="comment">// specific implementation</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_collections"><a class="anchor" href="#_collections"></a>3.2.1.6. Collections</h5>
<div class="paragraph">
<p>The Mapping layer supports <code>java.util.Collection</code> (and subclasses as defined below) mapping to simple elements such as <code>String</code> and <code>Integer</code> (that will be sent to the communication API as-is), and mapping to <code>Entity</code> or <code>Embedded</code> entities.</p>
</div>
<div class="paragraph">
<p>The following collections are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.util.Deque</code></p>
</li>
<li>
<p><code>java.util.Queue</code></p>
</li>
<li>
<p><code>java.util.List</code></p>
</li>
<li>
<p><code>java.util.Iterable</code></p>
</li>
<li>
<p><code>java.util.NavigableSet</code></p>
</li>
<li>
<p><code>java.util.SortedSet</code></p>
</li>
<li>
<p><code>java.util.Collection</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; phones;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;Address&gt; addresses;
}

<span class="annotation">@Embeddable</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Address</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> street;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> city;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above classes are mapped to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">_id</span><span class="delimiter">&quot;</span></span>:<span class="integer">10</span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">addresses</span><span class="delimiter">&quot;</span></span>:[
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">São Paulo</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Av Nove de Julho</span><span class="delimiter">&quot;</span></span>
      },
      {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Salvador</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Rua Engenheiro Jose Anasoh</span><span class="delimiter">&quot;</span></span>
      }
   ],
   <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Name</span><span class="delimiter">&quot;</span></span>,
   <span class="key"><span class="delimiter">&quot;</span><span class="content">phones</span><span class="delimiter">&quot;</span></span>:[
      <span class="string"><span class="delimiter">&quot;</span><span class="content">234</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">432</span><span class="delimiter">&quot;</span></span>
   ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_mappedsuperclass"><a class="anchor" href="#_mappedsuperclass"></a>3.2.1.7. @MappedSuperclass</h5>
<div class="paragraph">
<p>The class with the <code>@MapperSuperclass</code> annotation will have all attributes considered as an extension of this subclass with an <code>@Entity</code> annotation. In this case, all attributes are going to be stored, even the attributes inside the super class.</p>
</div>
<div class="paragraph">
<p>Using the MappedSuperclass strategy, inheritance is only evident in the class but not the entity model.</p>
</div>
<div class="paragraph">
<p>This means, that this annotation causes fields annotated with <code>@Column</code> in a parent class to be persisted together with the child class' fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Dog</span> <span class="directive">extends</span> Animal {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
}

<span class="annotation">@MappedSuperclass</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Animal</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> race;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">Integer</span> age;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the <code>Animal</code> doest not have an @Entity annotation, as it won&#8217;t be persisted in the database by itself.</p>
</div>
<div class="paragraph">
<p>On the example above, when saving a Dog instance, Animal class' fields are saved too: <code>name</code>, <code>race</code>, and <code>age</code> are saved in a single instance.</p>
</div>
</div>
<div class="sect4">
<h5 id="_inheritance"><a class="anchor" href="#_inheritance"></a>3.2.1.8. @Inheritance</h5>
<div class="paragraph">
<p>The strategy to work with inheritance with NoSQL, you can active it by adding the @Inheritance annotation to the superclass.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Inheritance</span>
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">Notification</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> LocalDate createdOn;

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> send();
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_discriminatorcolumn"><a class="anchor" href="#_discriminatorcolumn"></a>3.2.1.9. @DiscriminatorColumn</h5>
<div class="paragraph">
<p>This annotation specifies the discriminator column for the inheritance mapping strategy.
The strategy and the discriminator column are only specified in the root of an entity class hierarchy.</p>
</div>
<div class="paragraph">
<p>If the DiscriminatorColumn annotation is missing, and a discriminator column is required, the name of the discriminator column defaults is "type".</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@Inheritance</span>
<span class="annotation">@DiscriminatorColumn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">Notification</span> {
    <span class="annotation">@Id</span>
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> LocalDate createdOn;

    <span class="directive">public</span> <span class="directive">abstract</span> <span class="type">void</span> send();
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_discriminatorvalue"><a class="anchor" href="#_discriminatorvalue"></a>3.2.1.10. @DiscriminatorValue</h5>
<div class="paragraph">
<p>This annotation specifies the value of the discriminator column for entities of the given type.</p>
</div>
<div class="paragraph">
<p>The DiscriminatorValue annotation can only be specified on a concrete entity class.</p>
</div>
<div class="paragraph">
<p>If the DiscriminatorValue annotation is not specified a provider-specific function will be used to generate a value
representing the entity type, the discriminator value default is the <code>Class.getSimpleName()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="annotation">@DiscriminatorValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">SMS</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SmsNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> phoneNumber;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending message to sms: </span><span class="delimiter">&quot;</span></span> + phoneNumber);
    }
}

<span class="annotation">@Entity</span>
<span class="annotation">@DiscriminatorValue</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Email</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">EmailNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> phoneNumber;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending message to sms: </span><span class="delimiter">&quot;</span></span> + phoneNumber);
    }
}

<span class="annotation">@Entity</span>
<span class="comment">// the discriminator value is SocialMediaNotification</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SocialMediaNotification</span> <span class="directive">extends</span> <span class="predefined-type">Notification</span> {
    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> username;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> send() {
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending a post to: </span><span class="delimiter">&quot;</span></span> + username);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_database"><a class="anchor" href="#_database"></a>3.2.1.11. @Database</h5>
<div class="paragraph">
<p>This annotation allows programmers to specialize <code>@Inject</code> annotations to choose which specific resource should be injected.</p>
</div>
<div class="paragraph">
<p>For example, when working with multiple <code>DocumentTemplate</code>, the following statement are ambiguous:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DocumentTemplate templateA;

<span class="annotation">@Inject</span>
DocumentTemplate templateB;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Database</code> has two attributes to help specify what resource should be injected:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>DatabaseType</strong>: The database type (key-value, document, column, graph);</p>
</li>
<li>
<p><strong>provider</strong>: The provider&#8217;s database name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applying the annotation to the example above, the result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> DocumentTemplate templateA;

<span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> DocumentTemplate templateB;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A producer method annotated with the same <code>@Database</code> values must exist as well.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_template_classes"><a class="anchor" href="#_template_classes"></a>3.3. Template classes</h3>
<div class="paragraph">
<p>The template offers convenient operations to create, update, delete, query, and provides a mapping among your domain objects and communication API. The templates classes have a goal to persist an Entity Model through a communication API. It has three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Converter</strong>: That converts the Entity to a communication level API.</p>
</li>
<li>
<p><strong>EntityManager</strong>: The EntityManager for communication.</p>
</li>
<li>
<p><strong>Workflow</strong>: That defines the workflow when either you save or update an entity. These events are useful when you, e.g., want to validate data before being saved. See the following picture:</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_key_value_template"><a class="anchor" href="#_key_value_template"></a>3.3.1. Key-Value Template</h4>
<div class="paragraph">
<p>This template has the responsibility to serve as the persistence of an entity in a key-value database.</p>
</div>
<div class="paragraph">
<p>The <code>KeyValueTemplate</code> is the template for synchronous tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
KeyValueTemplate template;
...

User user = <span class="keyword">new</span> User();
user.setNickname(<span class="string"><span class="delimiter">&quot;</span><span class="content">ada</span><span class="delimiter">&quot;</span></span>);
user.setAge(<span class="integer">10</span>);
user.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Ada Lovelace</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">List</span>&lt;User&gt; users = <span class="predefined-type">Collections</span>.singletonList(user);

template.put(user);
template.put(users);

Optional&lt;Person&gt; ada = template.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">ada</span><span class="delimiter">&quot;</span></span>, Person.class);
<span class="predefined-type">Iterable</span>&lt;Person&gt; usersFound = template.get(<span class="predefined-type">Collections</span>.singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">ada</span><span class="delimiter">&quot;</span></span>), Person.class);</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
In key-value templates, both the <code>@Entity</code> and <code>@Id</code> annotations are required. The <code>@Id</code> identifies the key, and the whole entity will be the value. The API won&#8217;t cover how the value persists this entity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use a key-value template, just follow the CDI style and precede the field with the <code>@Inject</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> KeyValueTemplate template;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can work with several key-value database instances through CDI qualifier. To identify each database instance, make a <code>BucketManager</code> visible for CDI by putting the <code>@Produces</code> and the <code>@Database</code> annotations in the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.KEY_VALUE, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> KeyValueTemplate templateA;

<span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.KEY_VALUE, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> KeyValueTemplate templateB;

<span class="comment">// producers methods</span>
<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.KEY_VALUE, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> BucketManager getManagerA() {
    BucketManager manager = <span class="comment">// instance;</span>
    <span class="keyword">return</span> manager;
}

<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.KEY_VALUE, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> BucketManager getManagerB() {
    BucketManager manager = <span class="comment">// instance;</span>
    <span class="keyword">return</span> manager;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_columntemplate"><a class="anchor" href="#_columntemplate"></a>3.3.2. ColumnTemplate</h4>
<div class="paragraph">
<p>This template has the responsibility to serve as a bridge between the entity model and the communication to a column family NoSQL database type.</p>
</div>
<div class="paragraph">
<p>The <code>ColumnTemplate</code> is the column template for the synchronous tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
ColumnTemplate template;
...
Person person = <span class="keyword">new</span> Person();
person.setAddress(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>);
person.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Artemis Good</span><span class="delimiter">&quot;</span></span>);
person.setPhones(<span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>));
person.setNickname(<span class="string"><span class="delimiter">&quot;</span><span class="content">artemis</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">List</span>&lt;Person&gt; people = <span class="predefined-type">Collections</span>.singletonList(person);

Person personUpdated = template.insert(person);
template.insert(people);
template.insert(person, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">1L</span>));

template.update(person);
template.update(people);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For information removal and retrieval, there are <code>ColumnQuery</code> and <code>ColumnDeleteQuery</code> classes, respectively. Also, the callback method may be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>).build();

Stream&lt;Person&gt; peopleWhoLiveOnOlympus = template.select(query);
Optional&lt;Person&gt; artemis = template.singleResult(select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">nickname</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">artemis</span><span class="delimiter">&quot;</span></span>).build());

ColumnDeleteQuery deleteQuery = delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>).build();
template.delete(deleteQuery);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>ColumnQuery</code> and <code>ColumnDeleteQuery</code> won&#8217;t convert the object to native fields. However, <code>ColumnQueryMapperBuilder</code> creates both query types, reads the class, then switches to the native fields through annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Id</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">native_id</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="type">long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="type">int</span> age;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
ColumnQueryMapperBuilder mapperBuilder;
...
ColumnQuery query = mapperBuilder.selectFrom(Person.class).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>).gte(<span class="integer">10</span>).build();
  <span class="comment">// translating: select().from(&quot;Person&quot;).where(&quot;native_id&quot;).gte(10L).build();</span>
 ColumnDeleteQuery deleteQuery = mapperBuilder.deleteFrom(Person.class)
                                               .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">20</span><span class="delimiter">&quot;</span></span>).build();
 <span class="comment">// translating: delete().from(&quot;Person&quot;).where(&quot;native_id&quot;).gte(10L).build();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a column template, just follow the CDI style and precede the field with the <code>@Inject</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> ColumnTemplate template;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next step is to produce a <code>ColumnManager</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Produces</span>
<span class="directive">public</span> ColumnManager getManager() {
    ColumnManager manager = <span class="comment">// instance;</span>
    <span class="keyword">return</span> manager;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can work with several column database instances through CDI qualifier. To identify each database instance, make a <code>ColumnManager</code> visible for CDI by putting the <code>@Produces</code> and the <code>@Database</code> annotations in the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.COLUMN, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> ColumnTemplate templateA;

<span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.COLUMN, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> ColumnTemplate templateB;

<span class="comment">// producers methods</span>
<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.COLUMN, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> ColumnManager getManagerA() {
    <span class="keyword">return</span> manager;
}

<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.COLUMN, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> ColumnManager getManagerB() {
    <span class="keyword">return</span> manager;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_documenttemplate"><a class="anchor" href="#_documenttemplate"></a>3.3.3. DocumentTemplate</h4>
<div class="paragraph">
<p>This template has the responsibility to serve as a bridge between the entity model and the communication to a column family NoSQL database type.</p>
</div>
<div class="paragraph">
<p>The <code>DocumentTemplate</code> is the document template for the synchronous tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
DocumentTemplate template;
...

Person person = <span class="keyword">new</span> Person();
person.setAddress(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>);
person.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Artemis Good</span><span class="delimiter">&quot;</span></span>);
person.setPhones(<span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>));
person.setNickname(<span class="string"><span class="delimiter">&quot;</span><span class="content">artemis</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">List</span>&lt;Person&gt; people = <span class="predefined-type">Collections</span>.singletonList(person);

Person personUpdated = template.insert(person);
template.insert(people);
template.insert(person, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">1L</span>));

template.update(person);
template.update(people);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To remove and retrieve information from document collection, there are <code>DocumentQuery</code> and <code>DocumentDeleteQuery</code> classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentQuery query = select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>).build();

Stream&lt;Person&gt; peopleWhoLiveOnOlympus = template.find(query);
Optional&lt;Person&gt; artemis = template.singleResult(select().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">nickname</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">artemis</span><span class="delimiter">&quot;</span></span>).build());

DocumentDeleteQuery deleteQuery = delete().from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>).build();
template.delete(deleteQuery);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>DocumentQuery</code> and <code>DocumentDeleteQuery</code> query won&#8217;t convert the Object to native fields. However, <code>DocumentQueryMapperBuilder</code> creates both query types, reads the class, then switches to the native fields through annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Person</span> {

    <span class="annotation">@Id</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">native_id</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="type">long</span> id;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="predefined-type">String</span> name;

    <span class="annotation">@Column</span>
    <span class="directive">private</span> <span class="type">int</span> age;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> DocumentQueryMapperBuilder mapperBuilder;

<span class="directive">public</span> <span class="type">void</span> mapper() {
  DocumentQuery query = mapperBuilder.selectFrom(Person.class).where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>)
                                     .gte(<span class="integer">10</span>).build();
  <span class="comment">// translating: select().from(&quot;Person&quot;).where(&quot;native_id&quot;).gte(10L).build();</span>
  DocumentDeleteQuery deleteQuery = mapperBuilder.deleteFrom(Person.class)
                                                 .where(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>).eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">20</span><span class="delimiter">&quot;</span></span>).build();
  <span class="comment">// translating: delete().from(&quot;Person&quot;).where(&quot;native_id&quot;).gte(10L).build();</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a document template, just follow the CDI style and place an <code>@Inject</code> annotation on the field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> DocumentTemplate template;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can work with several document database instances through CDI qualifier. To identify each database instance, make a <code>DocumentManager</code> visible for CDI by putting the <code>@Produces</code> and the <code>@Database</code> annotations in the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> DocumentTemplate templateA;

<span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> DocumentTemplate templateB;

<span class="comment">// producers methods</span>
<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> DocumentManager getManagerA() {
    <span class="keyword">return</span> manager;
}

<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.DOCUMENT, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> DocumentManager getManagerB() {
    <span class="keyword">return</span> manager;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_template"><a class="anchor" href="#_graph_template"></a>3.3.4. Graph template</h4>
<div class="paragraph">
<p>This template has the responsibility to serve as the persistence of an entity in a Graph database using <a href="http://tinkerpop.apache.org/">Apache Tinkerpop</a>.</p>
</div>
<div class="paragraph">
<p>The <code>GraphTemplate</code> is the column template for synchronous tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
GraphTemplate template;

Person person = <span class="keyword">new</span> Person();
person.setAddress(<span class="string"><span class="delimiter">&quot;</span><span class="content">Olympus</span><span class="delimiter">&quot;</span></span>);
person.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Artemis Good</span><span class="delimiter">&quot;</span></span>);
person.setPhones(<span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">55 11 94320121</span><span class="delimiter">&quot;</span></span>));
person.setNickname(<span class="string"><span class="delimiter">&quot;</span><span class="content">artemis</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">List</span>&lt;Person&gt; people = <span class="predefined-type">Collections</span>.singletonList(person);

Person personUpdated = template.insert(person);
template.insert(people);
template.insert(person, <span class="predefined-type">Duration</span>.ofHours(<span class="integer">1L</span>));

template.update(person);
template.update(people);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_create_the_relationship_between_them_edgeentity"><a class="anchor" href="#_create_the_relationship_between_them_edgeentity"></a>3.3.4.1. Create the Relationship Between Them (EdgeEntity)</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Person poliana = <span class="comment">// instance;</span>
<span class="predefined-type">Book</span> shack = <span class="comment">// instance;</span>
EdgeEntity edge = graphTemplate.edge(poliana, <span class="string"><span class="delimiter">&quot;</span><span class="content">reads</span><span class="delimiter">&quot;</span></span>, shack);
reads.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">where</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Brazil</span><span class="delimiter">&quot;</span></span>);
Person out = edge.getOutgoing();
<span class="predefined-type">Book</span> in = edge.getIncoming();</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_querying_with_traversal"><a class="anchor" href="#_querying_with_traversal"></a>3.3.4.2. Querying with Traversal</h5>
<div class="paragraph">
<p>Traversals in Gremlin are spawned from a <code>TraversalSource</code>. The <code>GraphTraversalSource</code> is the typical "graph-oriented" DSL used throughout the documentation and will most likely be the most used DSL in a TinkerPop application.</p>
</div>
<div class="paragraph">
<p>To run a query in Graph with Gremlin, there are traversal interfaces. These interfaces are lazy; in other words, they just run after any finalizing method.</p>
</div>
<div class="paragraph">
<p>For example, In this scenario, there is a marketing campaign, and the target is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An engineer</p>
</li>
<li>
<p>The salary is higher than $3,000</p>
</li>
<li>
<p>The age is between 20 and 25 years old</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;Person&gt; developers = graph.getTraversalVertex()
       .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">salary</span><span class="delimiter">&quot;</span></span>, gte(<span class="integer">3</span>_000D))
       .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, between(<span class="integer">20</span>, <span class="integer">25</span>))
       .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">occupation</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Developer</span><span class="delimiter">&quot;</span></span>)
       .&lt;Person&gt;stream().collect(toList());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next step is to return the engineer&#8217;s friends.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;Person&gt; developers = graph.getTraversalVertex()
        .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">salary</span><span class="delimiter">&quot;</span></span>, gte(<span class="integer">3</span>_000D))
        .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, between(<span class="integer">20</span>, <span class="integer">25</span>))
        .has(<span class="string"><span class="delimiter">&quot;</span><span class="content">occupation</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Developer</span><span class="delimiter">&quot;</span></span>)
        .&lt;Person&gt;stream().out(<span class="string"><span class="delimiter">&quot;</span><span class="content">knows</span><span class="delimiter">&quot;</span></span>).collect(toList());</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a graph template, just follow the CDI style and precede the field with the <code>@Inject</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> GraphTemplate template;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can work with several graph database instances through CDI qualifier. To identify each database instance, make a <code>Graph</code> visible for CDI by putting the <code>@Produces</code> and the <code>@Database</code> annotations in the method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.GRAPH, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> GraphTemplate templateA;

<span class="annotation">@Inject</span>
<span class="annotation">@Database</span>(value = DatabaseType.GRAPH, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">private</span> GraphTemplate templateB;

<span class="comment">// producers methods</span>
<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.GRAPH, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseA</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Graph getManagerA() {
    <span class="keyword">return</span> graph;
}

<span class="annotation">@Produces</span>
<span class="annotation">@Database</span>(value = DatabaseType.GRAPH, provider = <span class="string"><span class="delimiter">&quot;</span><span class="content">databaseB</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Graph getManagerB() {
    <span class="keyword">return</span> graph;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_querying_by_text_with_the_mapping_api"><a class="anchor" href="#_querying_by_text_with_the_mapping_api"></a>3.3.5. Querying by Text with the Mapping API</h4>
<div class="paragraph">
<p>Similar to the Communication layer, the Mapping layer has query by text. Both Communication and Mapping have the <code>query</code> and <code>prepare</code> methods, however, the Mapping API will convert the fields and entities to native names from the Entity and Column annotations.</p>
</div>
<div class="sect4">
<h5 id="_key_value_database_types_2"><a class="anchor" href="#_key_value_database_types_2"></a>3.3.5.1. Key-Value Database Types</h5>
<div class="paragraph">
<p>In the Key-Value database, a <code>KeyValueTemplate</code> is used in this NoSQL storage technology. Usually, all the operations are defined by the ID. Therefore, it has a smooth query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">KeyValueTemplate template = <span class="comment">// instance;</span>
Stream&lt;User&gt; users = template.query(<span class="string"><span class="delimiter">&quot;</span><span class="content">get </span><span class="char">\&quot;</span><span class="content">Diana</span><span class="char">\&quot;</span><span class="delimiter">&quot;</span></span>);
template.query(<span class="string"><span class="delimiter">&quot;</span><span class="content">remove </span><span class="char">\&quot;</span><span class="content">Diana</span><span class="char">\&quot;</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_column_family_database_types"><a class="anchor" href="#_column_family_database_types"></a>3.3.5.2. Column-Family Database Types</h5>
<div class="paragraph">
<p>The Column-Family database has a more complex structure; however, a search from the key is still recommended. For example, both Cassandra and HBase have a secondary index, yet, neither have a guarantee about performance, and they usually recommend having a second table whose row key is the "secondary index" and is only being used to find the row key needed for the actual table. Given a <code>Person</code> class as an entity, we would like to operate from the field ID, which is the entity from the Entity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ColumnTemplate template = <span class="comment">// instance;</span>
Stream&lt;Person&gt; result = template.query(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where id = 1</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The main difference to run using a template instead of in a manager instance as the template will be a mapper as <strong>ColumnQueryMapperBuilder</strong> does.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_document_database_types"><a class="anchor" href="#_document_database_types"></a>3.3.5.3. Document Database Types</h5>
<div class="paragraph">
<p>The Document database allows for more complex queries, so with more complex entities within a Document database, a developer can more easily and naturally find from different fields. Also, there are Document databases that support an aggregations query. However, Jakarta NoSQL does not yet support this. From the Jakarta NoSQL API perspective, the Document and Column-Family types are pretty similar, but with the Document database type, a Java developer might initiate a query from a field that isn&#8217;t a key, and neither returns an unsupported operation exception or adds a secondary index for this. So, given the same <code>Person</code> class as an entity with the Document database type, a developer can do more with queries, such as "person" between "age."</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">DocumentTemplate template = <span class="comment">// instance;</span>
Stream&lt;Person&gt; result = template.query(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where age &gt; 10</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The main difference to run using a template instead of in a manager instance as the template will be a mapper as <strong>DocumentQueryMapperBuilder</strong> does.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_graph_database_types"><a class="anchor" href="#_graph_database_types"></a>3.3.5.4. Graph Database Types</h5>
<div class="paragraph">
<p>If an application needs a recommendation engine or a full detail about the relationship between two entities in your system, it requires a Graph database type. A graph database contains a vertex and an edge. The edge is an object that holds the relationship information about the edges and has direction and properties that make it perfect for maps or human relationship. For the Graph API, Jakarta NoSQL uses the Apache Tinkerpop. Likewise, the <code>GraphTemplate</code> is a wrapper to convert a Java entity to a <code>Vertex</code> in TinkerPop.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">GraphTemplate template = <span class="comment">// instance;</span>
Stream&lt;City&gt; cities = template.query(<span class="string"><span class="delimiter">&quot;</span><span class="content">g.V().hasLabel('City')</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">PreparedStatement</span> preparedStatement = documentTemplate
        .prepare(<span class="string"><span class="delimiter">&quot;</span><span class="content">select * from Person where name = @name</span><span class="delimiter">&quot;</span></span>);

preparedStatement.bind(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ada</span><span class="delimiter">&quot;</span></span>);

Stream&lt;Person&gt; adas = preparedStatement.getResult();

<span class="comment">// Keep using gremlin for Graph databases</span>
<span class="predefined-type">PreparedStatement</span> prepare = graphTemplate().prepare(<span class="string"><span class="delimiter">&quot;</span><span class="content">g.V().hasLabel(param)</span><span class="delimiter">&quot;</span></span>);

prepare.bind(<span class="string"><span class="delimiter">&quot;</span><span class="content">param</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>);

Stream&lt;Person&gt; people = preparedStatement.getResult();</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>4. References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_frameworks"><a class="anchor" href="#_frameworks"></a>4.1. Frameworks</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Spring Data</dt>
<dd>
<p><a href="http://projects.spring.io/spring-data/" class="bare">http://projects.spring.io/spring-data/</a></p>
</dd>
<dt class="hdlist1">Hibernate OGM</dt>
<dd>
<p><a href="http://hibernate.org/ogm/" class="bare">http://hibernate.org/ogm/</a></p>
</dd>
<dt class="hdlist1">Eclipselink</dt>
<dd>
<p><a href="http://www.eclipse.org/eclipselink/" class="bare">http://www.eclipse.org/eclipselink/</a></p>
</dd>
<dt class="hdlist1">Jdbc-json</dt>
<dd>
<p><a href="https://github.com/jdbc-json/jdbc-cb" class="bare">https://github.com/jdbc-json/jdbc-cb</a></p>
</dd>
<dt class="hdlist1">Simba</dt>
<dd>
<p><a href="http://www.simba.com/drivers/" class="bare">http://www.simba.com/drivers/</a></p>
</dd>
<dt class="hdlist1">Apache Tinkerpop</dt>
<dd>
<p><a href="http://tinkerpop.apache.org/" class="bare">http://tinkerpop.apache.org/</a></p>
</dd>
<dt class="hdlist1">Apache Gora</dt>
<dd>
<p><a href="http://gora.apache.org/about.html" class="bare">http://gora.apache.org/about.html</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_databases"><a class="anchor" href="#_databases"></a>4.2. Databases</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">ArangoDB</dt>
<dd>
<p><a href="https://www.arangodb.com/" class="bare">https://www.arangodb.com/</a></p>
</dd>
<dt class="hdlist1">Blazegraph</dt>
<dd>
<p><a href="https://www.blazegraph.com/" class="bare">https://www.blazegraph.com/</a></p>
</dd>
<dt class="hdlist1">Cassandra</dt>
<dd>
<p><a href="http://cassandra.apache.org/" class="bare">http://cassandra.apache.org/</a></p>
</dd>
<dt class="hdlist1">CosmosDB</dt>
<dd>
<p><a href="https://docs.microsoft.com/en-us/azure/cosmos-db/introduction" class="bare">https://docs.microsoft.com/en-us/azure/cosmos-db/introduction</a></p>
</dd>
<dt class="hdlist1">Couchbase</dt>
<dd>
<p><a href="https://www.couchbase.com/" class="bare">https://www.couchbase.com/</a></p>
</dd>
<dt class="hdlist1">Elastic Search</dt>
<dd>
<p><a href="https://www.elastic.co/" class="bare">https://www.elastic.co/</a></p>
</dd>
<dt class="hdlist1">Grakn</dt>
<dd>
<p><a href="https://grakn.ai/" class="bare">https://grakn.ai/</a></p>
</dd>
<dt class="hdlist1">Hazelcast</dt>
<dd>
<p><a href="https://hazelcast.com/" class="bare">https://hazelcast.com/</a></p>
</dd>
<dt class="hdlist1">Hbase</dt>
<dd>
<p><a href="https://hbase.apache.org/" class="bare">https://hbase.apache.org/</a></p>
</dd>
<dt class="hdlist1">Infinispan</dt>
<dd>
<p><a href="http://infinispan.org/" class="bare">http://infinispan.org/</a></p>
</dd>
<dt class="hdlist1">JanusGraph IBM</dt>
<dd>
<p><a href="https://www.ibm.com/cloud/compose/janusgraph" class="bare">https://www.ibm.com/cloud/compose/janusgraph</a></p>
</dd>
<dt class="hdlist1">Janusgraph</dt>
<dd>
<p><a href="http://janusgraph.org/" class="bare">http://janusgraph.org/</a></p>
</dd>
<dt class="hdlist1">Linkurio</dt>
<dd>
<p><a href="https://linkurio.us/" class="bare">https://linkurio.us/</a></p>
</dd>
<dt class="hdlist1">Keylines</dt>
<dd>
<p><a href="https://cambridge-intelligence.com/keylines/" class="bare">https://cambridge-intelligence.com/keylines/</a></p>
</dd>
<dt class="hdlist1">MongoDB</dt>
<dd>
<p><a href="https://www.mongodb.com/" class="bare">https://www.mongodb.com/</a></p>
</dd>
<dt class="hdlist1">Neo4J</dt>
<dd>
<p><a href="https://neo4j.com/" class="bare">https://neo4j.com/</a></p>
</dd>
<dt class="hdlist1">OriendDB</dt>
<dd>
<p><a href="https://orientdb.com/why-orientdb/" class="bare">https://orientdb.com/why-orientdb/</a></p>
</dd>
<dt class="hdlist1">RavenDB</dt>
<dd>
<p><a href="https://ravendb.net/" class="bare">https://ravendb.net/</a></p>
</dd>
<dt class="hdlist1">Redis</dt>
<dd>
<p><a href="https://redis.io/" class="bare">https://redis.io/</a></p>
</dd>
<dt class="hdlist1">Riak</dt>
<dd>
<p><a href="http://basho.com/" class="bare">http://basho.com/</a></p>
</dd>
<dt class="hdlist1">Scylladb</dt>
<dd>
<p><a href="https://www.scylladb.com/" class="bare">https://www.scylladb.com/</a></p>
</dd>
<dt class="hdlist1">Stardog</dt>
<dd>
<p><a href="https://www.stardog.com/" class="bare">https://www.stardog.com/</a></p>
</dd>
<dt class="hdlist1">TitanDB</dt>
<dd>
<p><a href="http://titan.thinkaurelius.com/" class="bare">http://titan.thinkaurelius.com/</a></p>
</dd>
<dt class="hdlist1">Memcached</dt>
<dd>
<p><a href="https://memcached.org/" class="bare">https://memcached.org/</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_articles"><a class="anchor" href="#_articles"></a>4.3. Articles</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Graph Databases for Beginners: ACID vs. BASE Explained</dt>
<dd>
<p><a href="https://neo4j.com/blog/acid-vs-base-consistency-models-explained/" class="bare">https://neo4j.com/blog/acid-vs-base-consistency-models-explained/</a></p>
</dd>
<dt class="hdlist1">Base: An Acid Alternative</dt>
<dd>
<p><a href="https://queue.acm.org/detail.cfm?id=1394128" class="bare">https://queue.acm.org/detail.cfm?id=1394128</a></p>
</dd>
<dt class="hdlist1">Understanding the CAP Theorem</dt>
<dd>
<p><a href="https://dzone.com/articles/understanding-the-cap-theorem" class="bare">https://dzone.com/articles/understanding-the-cap-theorem</a></p>
</dd>
<dt class="hdlist1">Wikipedia CAP theorem</dt>
<dd>
<p><a href="https://en.wikipedia.org/wiki/CAP_theorem" class="bare">https://en.wikipedia.org/wiki/CAP_theorem</a></p>
</dd>
<dt class="hdlist1">List of NoSQL databases</dt>
<dd>
<p><a href="http://nosql-database.org/" class="bare">http://nosql-database.org/</a></p>
</dd>
<dt class="hdlist1">Data access object Wiki</dt>
<dd>
<p><a href="https://en.wikipedia.org/wiki/Data_access_object" class="bare">https://en.wikipedia.org/wiki/Data_access_object</a></p>
</dd>
<dt class="hdlist1">CAP Theorem and Distributed Database Management Systems</dt>
<dd>
<p><a href="https://towardsdatascience.com/cap-theorem-and-distributed-database-management-systems-5c2be977950e" class="bare">https://towardsdatascience.com/cap-theorem-and-distributed-database-management-systems-5c2be977950e</a></p>
</dd>
<dt class="hdlist1">Oracle Java EE 9 NoSQL view</dt>
<dd>
<p><a href="https://javaee.github.io/javaee-spec/download/JavaEE9.pdf" class="bare">https://javaee.github.io/javaee-spec/download/JavaEE9.pdf</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
 1.0.0-b5<br>
Last updated 2022-12-22 16:28:41 -0300
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>